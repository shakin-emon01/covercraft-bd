"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const admin_controller_1 = require("../controllers/admin.controller");
const auth_middleware_1 = require("../middleware/auth.middleware");
const router = (0, express_1.Router)();
router.use(auth_middleware_1.authenticate, auth_middleware_1.requireAdmin);
router.get('/stats', (0, auth_middleware_1.requirePermission)('analytics.view'), admin_controller_1.getAdminStats);
router.get('/users', (0, auth_middleware_1.requirePermission)('users.view'), admin_controller_1.getAdminUsers);
router.get('/covers', (0, auth_middleware_1.requirePermission)('analytics.view'), admin_controller_1.getAdminCovers);
router.patch('/users/:id/access', (0, auth_middleware_1.requirePermission)('roles.manage'), admin_controller_1.updateUserRoleAndStatus);
router.delete('/users/:id', (0, auth_middleware_1.requirePermission)('users.delete'), admin_controller_1.deleteUser);
router.post('/users/mass-action', (0, auth_middleware_1.requirePermission)('users.mass'), admin_controller_1.massUserAction);
router.get('/users/abuse-risk', (0, auth_middleware_1.requirePermission)('users.abuse'), admin_controller_1.getAbuseRiskUsers);
router.post('/users/abuse-signals', (0, auth_middleware_1.requirePermission)('users.abuse'), admin_controller_1.createAbuseSignal);
router.patch('/users/abuse-signals/:id/review', (0, auth_middleware_1.requirePermission)('users.abuse'), admin_controller_1.markAbuseSignalReviewed);
router.get('/universities', (0, auth_middleware_1.requirePermission)('universities.manage'), admin_controller_1.getAllUniversitiesAdmin);
router.post('/universities', (0, auth_middleware_1.requirePermission)('universities.manage'), admin_controller_1.addUniversity);
router.put('/universities/:id', (0, auth_middleware_1.requirePermission)('universities.manage'), admin_controller_1.updateUniversity);
router.delete('/universities/:id', (0, auth_middleware_1.requirePermission)('universities.manage'), admin_controller_1.deleteUniversity);
router.post('/universities/sync', (0, auth_middleware_1.requirePermission)('universities.manage'), admin_controller_1.syncUniversitiesByAdmin);
router.post('/universities/:id/logo', (0, auth_middleware_1.requirePermission)('universities.manage'), admin_controller_1.upload.single('logo'), admin_controller_1.uploadUniversityLogo);
router.get('/verifications', (0, auth_middleware_1.requirePermission)('verification.view'), admin_controller_1.getUniversityVerifications);
router.post('/verifications', (0, auth_middleware_1.requirePermission)('verification.manage'), admin_controller_1.createUniversityVerificationRequest);
router.post('/verifications/:id/review', (0, auth_middleware_1.requirePermission)('verification.manage'), admin_controller_1.reviewUniversityVerification);
router.get('/logo-requests', (0, auth_middleware_1.requirePermission)('logos.review'), admin_controller_1.getPendingLogoRequests);
router.post('/logo-requests/:id/resolve', (0, auth_middleware_1.requirePermission)('logos.review'), admin_controller_1.reviewLogoRequest);
router.get('/analytics/templates', (0, auth_middleware_1.requirePermission)('analytics.view'), admin_controller_1.getTemplateAnalytics);
router.get('/analytics/templates/performance', (0, auth_middleware_1.requirePermission)('analytics.view'), admin_controller_1.getTemplatePerformanceAnalytics);
router.post('/broadcast', (0, auth_middleware_1.requirePermission)('broadcast.manage'), admin_controller_1.updateBroadcast);
router.get('/alerts', (0, auth_middleware_1.requirePermission)('alerts.manage'), admin_controller_1.getOperationalAlerts);
router.post('/alerts', (0, auth_middleware_1.requirePermission)('alerts.manage'), admin_controller_1.createOperationalAlert);
router.patch('/alerts/:id/resolve', (0, auth_middleware_1.requirePermission)('alerts.manage'), admin_controller_1.resolveOperationalAlert);
router.get('/flags', (0, auth_middleware_1.requirePermission)('flags.view'), admin_controller_1.getFeatureFlags);
router.post('/flags', (0, auth_middleware_1.requirePermission)('flags.manage'), admin_controller_1.upsertFeatureFlag);
router.delete('/flags/:key', (0, auth_middleware_1.requirePermission)('flags.manage'), admin_controller_1.deleteFeatureFlag);
router.get('/support/tickets', (0, auth_middleware_1.requirePermission)('tickets.manage'), admin_controller_1.getSupportTickets);
router.get('/support/tickets/stats', (0, auth_middleware_1.requirePermission)('tickets.manage'), admin_controller_1.getSupportTicketStats);
router.post('/support/tickets', (0, auth_middleware_1.requirePermission)('tickets.manage'), admin_controller_1.createSupportTicket);
router.patch('/support/tickets/:id', (0, auth_middleware_1.requirePermission)('tickets.manage'), admin_controller_1.updateSupportTicket);
router.get('/audit-logs', (0, auth_middleware_1.requirePermission)('audit.view'), admin_controller_1.getAuditLogs);
router.get('/role-matrix', (0, auth_middleware_1.requirePermission)('audit.view'), admin_controller_1.getRoleMatrix);
exports.default = router;
